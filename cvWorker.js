!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=92)}([,,function(t,e,r){var n=r(27)("wks"),o=r(28),i=r(3).Symbol,c="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=c&&i[t]||(c?i:o)("Symbol."+t))}).store=n},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(t,e){t.exports={}},function(t,e,r){var n=r(13),o=r(26);t.exports=r(7)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){t.exports=!r(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(14);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},,function(t,e,r){var n=r(35),o=r(12);t.exports=function(t){return n(o(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(8),o=r(50),i=r(51),c=Object.defineProperty;e.f=r(7)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(27)("keys"),o=r(28);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,,,function(t,e,r){r(45);for(var n=r(3),o=r(6),i=r(5),c=r(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var s=a[u],v=n[s],f=v&&v.prototype;f&&!f[c]&&o(f,c,s),i[s]=i.Array}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){"use strict";var n=r(24),o=r(36),i=r(52),c=r(6),a=r(5),u=r(53),s=r(30),v=r(61),f=r(2)("iterator"),l=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,r,d,p,y,w){u(r,e,d);var g,_,m,x=function(t){if(!l&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},M=e+" Iterator",b="values"==p,O=!1,S=t.prototype,C=S[f]||S["@@iterator"]||p&&S[p],R=C||x(p),A=p?b?x("entries"):R:void 0,P="Array"==e&&S.entries||C;if(P&&(m=v(P.call(new t)))!==Object.prototype&&m.next&&(s(m,M,!0),n||"function"==typeof m[f]||c(m,f,h)),b&&C&&"values"!==C.name&&(O=!0,R=function(){return C.call(this)}),n&&!w||!l&&!O&&S[f]||c(S,f,R),a[e]=R,a[M]=h,p)if(g={values:b?R:x("values"),keys:y?R:x("keys"),entries:A},w)for(_ in g)_ in S||i(S,_,g[_]);else o(o.P+o.F*(l||O),e,g);return g}},function(t,e){t.exports=!0},function(t,e,r){var n=r(14),o=r(3).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(4),o=r(3),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(24)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(13).f,o=r(9),i=r(2)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){"use strict";var n=r(62)(!0);r(23)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){var n=r(22),o=r(2)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:i?n(e):"Object"==(c=n(e))&&"function"==typeof e.callee?"Arguments":c}},function(t,e,r){"use strict";e.__esModule=!0;var n=i(r(43)),o=i(r(64));function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var r=[],n=!0,i=!1,c=void 0;try{for(var a,u=(0,o.default)(t);!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,c=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw c}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},,function(t,e,r){var n=r(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(3),o=r(4),i=r(48),c=r(6),a=r(9),u=function(t,e,r){var s,v,f,l=t&u.F,h=t&u.G,d=t&u.S,p=t&u.P,y=t&u.B,w=t&u.W,g=h?o:o[e]||(o[e]={}),_=g.prototype,m=h?n:d?n[e]:(n[e]||{}).prototype;for(s in h&&(r=e),r)(v=!l&&m&&void 0!==m[s])&&a(g,s)||(f=v?m[s]:r[s],g[s]=h&&"function"!=typeof m[s]?r[s]:y&&v?i(f,n):w&&m[s]==f?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?i(Function.call,f):f,p&&((g.virtual||(g.virtual={}))[s]=f,t&u.R&&_&&!_[s]&&c(_,s,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){var n=r(56),o=r(29);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(12);t.exports=function(t){return Object(n(t))}},,,,,function(t,e,r){t.exports={default:r(44),__esModule:!0}},function(t,e,r){r(21),r(31),t.exports=r(63)},function(t,e,r){"use strict";var n=r(46),o=r(47),i=r(5),c=r(11);t.exports=r(23)(Array,"Array",(function(t,e){this._t=c(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(49);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){t.exports=!r(7)&&!r(17)((function(){return 7!=Object.defineProperty(r(25)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(14);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports=r(6)},function(t,e,r){"use strict";var n=r(54),o=r(26),i=r(30),c={};r(6)(c,r(2)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n(c,{next:o(1,r)}),i(t,e+" Iterator")}},function(t,e,r){var n=r(8),o=r(55),i=r(29),c=r(16)("IE_PROTO"),a=function(){},u=function(){var t,e=r(25)("iframe"),n=i.length;for(e.style.display="none",r(60).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[i[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(a.prototype=n(t),r=new a,a.prototype=null,r[c]=t):r=u(),void 0===e?r:o(r,e)}},function(t,e,r){var n=r(13),o=r(8),i=r(37);t.exports=r(7)?Object.defineProperties:function(t,e){o(t);for(var r,c=i(e),a=c.length,u=0;a>u;)n.f(t,r=c[u++],e[r]);return t}},function(t,e,r){var n=r(9),o=r(11),i=r(57)(!1),c=r(16)("IE_PROTO");t.exports=function(t,e){var r,a=o(t),u=0,s=[];for(r in a)r!=c&&n(a,r)&&s.push(r);for(;e.length>u;)n(a,r=e[u++])&&(~i(s,r)||s.push(r));return s}},function(t,e,r){var n=r(11),o=r(58),i=r(59);t.exports=function(t){return function(e,r,c){var a,u=n(e),s=o(u.length),v=i(c,s);if(t&&r!=r){for(;s>v;)if((a=u[v++])!=a)return!0}else for(;s>v;v++)if((t||v in u)&&u[v]===r)return t||v||0;return!t&&-1}}},function(t,e,r){var n=r(15),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,r){var n=r(15),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):i(t,e)}},function(t,e,r){var n=r(3).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(9),o=r(38),i=r(16)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,r){var n=r(15),o=r(12);t.exports=function(t){return function(e,r){var i,c,a=String(o(e)),u=n(r),s=a.length;return u<0||u>=s?t?"":void 0:(i=a.charCodeAt(u))<55296||i>56319||u+1===s||(c=a.charCodeAt(u+1))<56320||c>57343?t?a.charAt(u):i:t?a.slice(u,u+2):c-56320+(i-55296<<10)+65536}}},function(t,e,r){var n=r(32),o=r(2)("iterator"),i=r(5);t.exports=r(4).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(n(e))}},function(t,e,r){t.exports={default:r(65),__esModule:!0}},function(t,e,r){r(21),r(31),t.exports=r(66)},function(t,e,r){var n=r(8),o=r(67);t.exports=r(4).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(32),o=r(2)("iterator"),i=r(5);t.exports=r(4).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";module.exports=function(worker){worker.onmessage=function(e){var onmessage=this,exec=e.data.exec||"",method=e.data.method,args=e.data.args||[],context=e.data.context||{};eval(exec),worker.handler[method].apply(context,args)},worker.send=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[new ArrayBuffer(0)];e.method=t,worker.postMessage(e,r)},worker.log=function(t){worker.postMessage({method:"log",returns:t})}}},,,,,,,,,,,,function(t,e,r){"use strict";var n,o=r(33),c=(n=o)&&n.__esModule?n:{default:n};r(80)(self),self.handler=new function(){var t=this;this.width=0,this.height=0,this.worker=null,this.mat=null,this.init=function(e,r,n){t.width=e,t.height=r},this.render=function(e){t.mat=cv.matFromArray(t.width,t.height,cv.CV_8UC4,e)},this.subImages=function(e){var r=[],n=t.mat.clone(),o=cv.Mat.ones(5,5,cv.CV_8U),i=new cv.Point(-1,-1);if(cv.morphologyEx(n,n,cv.MORPH_OPEN,o,i,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue()),!e||e.length<=0){var a=new t.FindCountours;a.init(),e=a.getRects(1e4),a.delete()}var u=[];for(var s in e){var v=(0,c.default)(e[s],4),f=v[0],l=v[1],h=v[2],d=v[3],p=new cv.Rect(f,l,h,d),y=n.roi(p),w=new Uint8ClampedArray(y.data);u.push(w.buffer),r.push({data:w,rect:[f,l,h,d]}),y.delete();var g=new cv.Scalar(255,0,0),_=new cv.Point(f,l),m=new cv.Point(f+h,l+d);cv.rectangle(n,_,m,g,2,cv.LINE_AA,0)}n.delete(),self.send("subImages",{rois:r},u)},this.CamShifter=function(e,r){var n=this;this.init=function(e,r,o,i){if(e instanceof Array){var a=e,u=(0,c.default)(a,4);e=u[0],r=u[1],o=u[2],i=u[3]}n.trackWindow=new cv.Rect(e,r,o,i);var s=n.frame.roi(n.trackWindow),v=new cv.Mat;cv.cvtColor(s,v,cv.COLOR_RGBA2RGB),cv.cvtColor(v,v,cv.COLOR_RGB2HSV);var f=new cv.Mat,l=new cv.Scalar(30,30,0),h=new cv.Scalar(180,180,180),d=new cv.Mat(v.rows,v.cols,v.type(),l),p=new cv.Mat(v.rows,v.cols,v.type(),h);cv.inRange(v,d,p,f),n.roiHist=new cv.Mat;var y=new cv.MatVector;y.push_back(v),cv.calcHist(y,[0],f,n.roiHist,[180],[0,180]),cv.normalize(n.roiHist,n.roiHist,0,255,cv.NORM_MINMAX),s.delete(),v.delete(),f.delete(),d.delete(),p.delete(),y.delete(),n.hsv=new cv.Mat(t.height,t.width,cv.CV_8UC3),n.hsvVec=new cv.MatVector,n.hsvVec.push_back(n.hsv),n.dst=new cv.Mat},this.getBox=function(){n.frame=t.mat.clone(),cv.cvtColor(n.frame,n.hsv,cv.COLOR_RGBA2RGB),cv.cvtColor(n.hsv,n.hsv,cv.COLOR_RGB2HSV),cv.calcBackProject(n.hsvVec,[0],n.roiHist,n.dst,[0,180],1);var e=cv.CamShift(n.dst,n.trackWindow,n.termCrit),r=(0,c.default)(e,2);n.trackBox=r[0],n.trackWindow=r[1],self.send("CamShifter",{self:n,trackBox:n.trackBox})},this[e].apply({},r)},this.MeanShifter=function(e,r){var n=this;this.init=function(e,r,o,i){if(n.cache=[],e instanceof Array){var a=e,u=(0,c.default)(a,4);e=u[0],r=u[1],o=u[2],i=u[3]}n.trackWindow=new cv.Rect(e,r,o,i);var s=n.frame.roi(n.trackWindow),v=new cv.Mat;cv.cvtColor(s,v,cv.COLOR_RGBA2RGB),cv.cvtColor(v,v,cv.COLOR_RGB2HSV);var f=new cv.Mat,l=new cv.Scalar(30,30,0),h=new cv.Scalar(180,180,180),d=new cv.Mat(v.rows,v.cols,v.type(),l),p=new cv.Mat(v.rows,v.cols,v.type(),h);cv.inRange(v,d,p,f),n.roiHist=new cv.Mat;var y=new cv.MatVector;y.push_back(v),cv.calcHist(y,[0],f,n.roiHist,[180],[0,180]),cv.normalize(n.roiHist,n.roiHist,0,255,cv.NORM_MINMAX),s.delete(),v.delete(),f.delete(),d.delete(),p.delete(),y.delete(),n.hsv=new cv.Mat(t.height,t.width,cv.CV_8UC3),n.hsvVec=new cv.MatVector,n.hsvVec.push_back(n.hsv),n.dst=new cv.Mat},this.getRect=function(){n.frame=t.mat.clone(),cv.cvtColor(n.frame,n.hsv,cv.COLOR_RGBA2RGB),cv.cvtColor(n.hsv,n.hsv,cv.COLOR_RGB2HSV),cv.calcBackProject(n.hsvVec,[0],n.roiHist,n.dst,[0,180],1);var e=cv.meanShift(n.dst,n.trackWindow,n.termCrit),r=(0,c.default)(e,2);n.trackWindow=r[1];var o=[n.trackWindow.x,n.trackWindow.y,n.trackWindow.width,n.trackWindow.height],i=o[0],a=o[1],u=o[2],s=o[3];self.send("MeanShifter",{self:n,Rect:[i,a,u,s]})},this[e].apply({},r)},this.KLTracker=function(e,r){var n=this;this.init=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(t instanceof Array){var i=t,a=(0,c.default)(i,4);t=a[0],e=a[1],r=a[2],o=a[3]}n.availableArea={x:t,y:e,width:r,height:o},self.send("KLTracker",{method:"init"})},this.getRect=function(){n.frame=t.mat.clone(),cv.cvtColor(n.frame,n.frameGray,cv.COLOR_RGBA2GRAY),cv.calcOpticalFlowPyrLK(n.oldGray,n.frameGray,n.p0,n.p1,n.st,n.err,n.winSize,n.maxLevel,n.criteria);for(var e=[],r=[],o=0;o<n.st.rows;o++)1===n.st.data[o]&&(e.push(new cv.Point(n.p1.data32F[2*o],n.p1.data32F[2*o+1])),r.push(new cv.Point(n.p0.data32F[2*o],n.p0.data32F[2*o+1])));n.frameGray.copyTo(n.oldGray),n.p0.delete(),n.p0=null,n.p0=new cv.Mat(e.length,1,cv.CV_32FC2);for(var i=0;i<e.length;i++)n.p0.data32F[2*i]=e[i].x,n.p0.data32F[2*i+1]=e[i].y;for(var c=0,a=0,u=0,s=0;s<e.length;s++)r[s].x>=n.availableArea.x&&r[s].x<=n.availableArea.x+n.availableArea.width&&r[s].y>=n.availableArea.y&&r[s].y<=n.availableArea.y+n.availableArea.height&&(c=c+e[s].x-r[s].x,a=a+e[s].y-r[s].y,u++);0===u&&(u=1),c/=u,a/=u,n.availableArea.x+=c,n.availableArea.y+=a,console.log(c,a),self.send("KLTracker",{method:"getRect",Rect:[n.availableArea.x,n.availableArea.y,n.availableArea.width,n.availableArea.height]})},this[e].apply({},r)},this.FindCountours=function(e,r){var n=this;this.init=function(){var e=new cv.Mat(t.height,t.width,cv.CV_8UC4),r=new cv.Mat(t.height,t.width,cv.CV_8UC1);e=t.mat.clone(),cv.cvtColor(e,e,cv.COLOR_RGB2GRAY,0);var o=new cv.Mat(video.height,video.width,cv.CV_8UC1);cv.Canny(e,o,50,100,3,!1);var i=cv.Mat.eye(3,3,cv.CV_32FC1),c=new cv.Point(-1,-1);cv.filter2D(o,o,cv.CV_8U,i,c,0,cv.BORDER_DEFAULT),cv.threshold(o,o,120,200,cv.THRESH_BINARY);var a=new cv.Mat;cv.findContours(o,n.contours,a,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_SIMPLE),cv.HoughLinesP(o,n.lines,1,Math.PI/180,2,0,0),e.delete(),r.delete(),a.delete()},this.getRects=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=[],r=0;r<n.contours.size();++r){var o=cv.boundingRect(n.contours.get(r)),i=[o.x,o.y,o.width,o.height],c=i[0],a=i[1],u=i[2],s=i[3];u*s>=t&&e.push([c,a,u,s])}return e},this.getMoments=function(){for(var t=[],e=0;e<n.contours.size();++e)t.push(cv.moments(n.contours.get(e)));return t},this.getCurves=function(){for(var t=new cv.MatVector,e=0;e<n.contours.size();++e){var r=new cv.Mat,o=n.contours.get(e);cv.approxPolyDP(o,r,3,!0),t.push_back(r),o.delete(),r.delete()}return t},this.getPoints=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=[],r=0;r<n.lines.rows;r++){var o=[Math.abs(n.lines.data32S[4*i]-n.lines.data32S[4*i+2]),Math.abs(n.lines.data32S[4*i+1]-n.lines.data32S[4*i+3])],c=o[0],a=o[1];if(!(a/c>t)){var u=(n.lines.data32S[4*i]+n.lines.data32S[4*i+2])/2,s=(n.lines.data32S[4*i+1]+n.lines.data32S[4*i+3])/2;e.push([u,s])}}return e},this.delete=function(){n.contours.delete()},this[e].apply({},r)},this.Watershed=function(){var e=new cv.Mat(t.height,t.width,cv.CV_8UC4),r=new cv.Mat(t.height,t.width,cv.CV_8UC1);t.cap.read(e);var n=new cv.Mat,o=new cv.Mat,i=new cv.Mat,c=new cv.Mat,a=new cv.Mat,u=new cv.Mat,s=new cv.Mat;cv.cvtColor(e,n,cv.COLOR_RGBA2GRAY,0),cv.threshold(n,n,0,255,cv.THRESH_BINARY_INV+cv.THRESH_OTSU);var v=cv.Mat.ones(3,3,cv.CV_8U);cv.erode(n,n,v),cv.dilate(n,o,v),cv.dilate(o,i,v,new cv.Point(-1,-1),3),cv.distanceTransform(o,a,cv.DIST_L2,5),cv.normalize(a,a,1,0,cv.NORM_INF),cv.threshold(a,c,.7,255,cv.THRESH_BINARY),c.convertTo(c,cv.CV_8U,1,0),cv.subtract(i,c,u),cv.connectedComponents(c,s);for(var f=0;f<s.rows;f++)for(var l=0;l<s.cols;l++)s.intPtr(f,l)[0]=s.ucharPtr(f,l)[0]+1,255==u.ucharPtr(f,l)[0]&&(s.intPtr(f,l)[0]=0);cv.cvtColor(e,e,cv.COLOR_RGBA2RGB,0),cv.watershed(e,s);for(var h=0;h<s.rows;h++)for(var d=0;d<s.cols;d++)-1==s.intPtr(h,d)[0]&&(e.ucharPtr(h,d)[0]=255,e.ucharPtr(h,d)[1]=0,e.ucharPtr(h,d)[2]=0);return cv.imshow("temp",e),e.delete(),r.delete(),n.delete(),o.delete(),i.delete(),c.delete(),a.delete(),u.delete(),s.delete(),v.delete(),e}}}]);